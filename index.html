<!doctype html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cosmic Hama Creations</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="desk-overlay"></div>
    <main class="app-shell">
      <header class="hero-card">
        <h1>Cosmic Hama Creations</h1>
        <p>
          Crea blueprint realistici con stile cottagecore: converti immagini in schemi Hama Beads,
          disegna su griglia e condividi il risultato con un link.
        </p>
      </header>

      <section class="panel controls-panel">
        <h2>Impostazioni progetto</h2>
        <div class="form-grid">
          <label>
            Larghezza griglia
            <input id="gridWidth" type="number" min="8" max="128" value="32" />
          </label>
          <label>
            Altezza griglia
            <input id="gridHeight" type="number" min="8" max="128" value="32" />
          </label>
          <label>
            Misura perlina (mm)
            <select id="beadSize">
              <option value="2.6">Mini (2.6 mm)</option>
              <option value="5" selected>Midi (5 mm)</option>
              <option value="10">Maxi (10 mm)</option>
            </select>
          </label>
          <label>
            Mostra griglia
            <input id="toggleGrid" type="checkbox" checked />
          </label>
        </div>
        <div class="actions-row">
          <button id="applyGridBtn" class="btn-primary">Applica griglia</button>
          <button id="clearBtn">Svuota progetto</button>
          <button id="downloadBtn">Scarica PNG</button>
        </div>
      </section>

      <section class="panel converter-panel">
        <h2>Converti immagine in schema</h2>
        <p class="muted">
          Carica un'immagine e riducila alla palette Hama per ottenere una bozza pronta da seguire.
        </p>
        <div class="form-grid">
          <label>
            Carica immagine
            <input id="imageInput" type="file" accept="image/*" />
          </label>
          <label>
            Intensita riduzione colori
            <input id="colorSteps" type="range" min="4" max="24" value="12" />
            <span id="colorStepsValue">12</span>
          </label>
        </div>
        <button id="convertBtn" class="btn-primary">Converti in Hama blueprint</button>
      </section>

      <section class="panel editor-panel">
        <div class="editor-header">
          <h2>Editor blueprint Hama</h2>
          <p class="muted">Tool stile paint: matita, secchiello, forme, undo/redo e preview trasparente.</p>
        </div>

        <div class="workspace">
          <aside class="tools-sidebar">
            <div class="palette" id="palette"></div>
            <div class="tool-grid" id="toolBar">
              <button data-tool="pencil" class="paint-tool-btn active icon-btn" title="Matita" aria-label="Matita">
                <svg class="tool-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 20l4.5-1 9-9-3.5-3.5-9 9L4 20z"/><path d="M13.8 6.2l3.5 3.5"/><path d="M3.5 20.5h5"/></svg>
              </button>
              <button data-tool="eraser" class="paint-tool-btn icon-btn" title="Gomma" aria-label="Gomma">
                <svg class="tool-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 14l7-7a2 2 0 0 1 2.8 0L21 15.2 16.2 20H9L3 14z"/><path d="M9 20h12"/></svg>
              </button>
              <button data-tool="bucket" class="paint-tool-btn icon-btn" title="Secchiello" aria-label="Secchiello">
                <svg class="tool-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 6l8 8-5.5 5.5a3 3 0 0 1-4.2 0L2.5 15.7a3 3 0 0 1 0-4.2L8 6z"/><path d="M15 4l5 5"/><path d="M17.5 18.5a2.5 2.5 0 1 0 5 0c0-1.4-1.6-3.4-2.5-4.4-.9 1-2.5 3-2.5 4.4z"/></svg>
              </button>
              <button data-tool="line" class="paint-tool-btn icon-btn" title="Linea" aria-label="Linea">
                <svg class="tool-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 19L19 4"/><circle cx="4" cy="19" r="2"/><circle cx="19" cy="4" r="2"/></svg>
              </button>
              <button data-tool="rect" class="paint-tool-btn icon-btn" title="Rettangolo" aria-label="Rettangolo">
                <svg class="tool-icon" viewBox="0 0 24 24" aria-hidden="true"><rect x="4" y="6" width="16" height="12" rx="1.5"/></svg>
              </button>
              <button data-tool="circle" class="paint-tool-btn icon-btn" title="Cerchio" aria-label="Cerchio">
                <svg class="tool-icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="7"/></svg>
              </button>
            </div>
            <div class="history-row">
              <button id="undoBtn" class="icon-btn" title="Annulla" aria-label="Annulla">
                <svg class="tool-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M9 7L4 12l5 5"/><path d="M20 12H4"/><path d="M20 12a6 6 0 0 0-6-6"/></svg>
              </button>
              <button id="redoBtn" class="icon-btn" title="Ripristina" aria-label="Ripristina">
                <svg class="tool-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M15 7l5 5-5 5"/><path d="M4 12h16"/><path d="M4 12a6 6 0 0 1 6-6"/></svg>
              </button>
            </div>
          </aside>
          <div class="canvas-wrap">
            <canvas id="beadCanvas" width="640" height="640" aria-label="Canvas bead editor"></canvas>
          </div>
        </div>
      </section>

      <section class="panel share-panel">
        <h2>Condivisione blueprint</h2>
        <p class="muted">Genera un link condivisibile contenente tutto il design.</p>
        <div class="actions-row">
          <button id="shareBtn" class="btn-primary">Genera link</button>
          <input id="shareLink" type="text" readonly placeholder="Il link apparira qui..." />
        </div>
      </section>
    </main>

    <script src="app.js" defer></script>
  </body>
</html>
